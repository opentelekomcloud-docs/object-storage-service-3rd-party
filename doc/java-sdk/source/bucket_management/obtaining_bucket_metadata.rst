:original_name: obs_21_0405.html

.. _obs_21_0405:

Obtaining Bucket Metadata
=========================

Function
--------

This API returns information about a bucket, including the storage class, region, CORS rules, and redundancy policy.

Restrictions
------------

-  To obtain bucket metadata, you must be the bucket owner or have the required permission (**obs:bucket:HeadBucket** in IAM or **HeadBucket** in a bucket policy).
-  For details about values for methods such as **BucketMetadataInfoResult.getAllowMethods**, see the :ref:`CORS <obs_21_1401>` configurations of the bucket.

Method
------

obsClient.getBucketMetadata(:ref:`BucketMetadataInfoRequest <obs_21_0405__table14455523>` :ref:`request <obs_21_0405__table1210700>`)

Request Parameters
------------------

.. _obs_21_0405__table1210700:

.. table:: **Table 1** List of request parameters

   +-----------------+---------------------------------------------------------------+--------------------+-----------------------------------------------------------------------------------------------------------------+
   | Parameter       | Type                                                          | Mandatory (Yes/No) | Description                                                                                                     |
   +=================+===============================================================+====================+=================================================================================================================+
   | request         | :ref:`BucketMetadataInfoRequest <obs_21_0405__table14455523>` | Yes                | **Explanation:**                                                                                                |
   |                 |                                                               |                    |                                                                                                                 |
   |                 |                                                               |                    | Request parameters for obtaining bucket metadata. For details, see :ref:`Table 2 <obs_21_0405__table14455523>`. |
   +-----------------+---------------------------------------------------------------+--------------------+-----------------------------------------------------------------------------------------------------------------+

.. _obs_21_0405__table14455523:

.. table:: **Table 2** BucketMetadataInfoRequest

   +-----------------+-----------------+--------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Type            | Mandatory (Yes/No) | Description                                                                                                                                                                                                                              |
   +=================+=================+====================+==========================================================================================================================================================================================================================================+
   | bucketName      | String          | Yes                | **Explanation:**                                                                                                                                                                                                                         |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | Bucket name.                                                                                                                                                                                                                             |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Restrictions:**                                                                                                                                                                                                                        |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | -  A bucket name must be unique across all accounts and regions.                                                                                                                                                                         |
   |                 |                 |                    | -  A bucket name:                                                                                                                                                                                                                        |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    |    -  Must be 3 to 63 characters long and start with a digit or letter. Lowercase letters, digits, hyphens (-), and periods (.) are allowed.                                                                                             |
   |                 |                 |                    |    -  Cannot be formatted as an IP address.                                                                                                                                                                                              |
   |                 |                 |                    |    -  Cannot start or end with a hyphen (-) or period (.).                                                                                                                                                                               |
   |                 |                 |                    |    -  Cannot contain two consecutive periods (..), for example, **my..bucket**.                                                                                                                                                          |
   |                 |                 |                    |    -  Cannot contain periods (.) and hyphens (-) adjacent to each other, for example, **my-.bucket** or **my.-bucket**.                                                                                                                  |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | -  If you repeatedly create buckets of the same name in the same region, no error will be reported and the bucket attributes comply with those set in the first creation request.                                                        |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Default value**:                                                                                                                                                                                                                       |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | None                                                                                                                                                                                                                                     |
   +-----------------+-----------------+--------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | origin          | String          | No                 | **Explanation:**                                                                                                                                                                                                                         |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | Origin of the cross-domain request specified by the preflight request. Generally, it is a domain name.                                                                                                                                   |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Restrictions:**                                                                                                                                                                                                                        |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | You can configure one or more rules and use at most one wildcard character (``*``) in each rule. If you want to configure multiple rules, separate them using a line breaker.                                                            |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Default value**:                                                                                                                                                                                                                       |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | None                                                                                                                                                                                                                                     |
   +-----------------+-----------------+--------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | requestHeaders  | List<String>    | No                 | **Explanation:**                                                                                                                                                                                                                         |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | HTTP headers in a cross-origin request. Only CORS requests matching the allowed headers are valid.                                                                                                                                       |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Restrictions:**                                                                                                                                                                                                                        |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | You can enter multiple allowed headers, with one separated from another using a line break. Each header can contain one wildcard character (``*``) at most. Spaces, ampersands (&), colons (:), and less-than signs (<) are not allowed. |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | **Default value**:                                                                                                                                                                                                                       |
   |                 |                 |                    |                                                                                                                                                                                                                                          |
   |                 |                 |                    | None                                                                                                                                                                                                                                     |
   +-----------------+-----------------+--------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Responses
---------

.. table:: **Table 3** BucketMetadataInfoResult

   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                      | Description                                                                                                                                                                                                                                                                                                               |
   +=======================+===========================================================+===========================================================================================================================================================================================================================================================================================================================+
   | statusCode            | int                                                       | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | HTTP status code.                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | A status code is a group of digits that can be **2**\ *xx* (indicating successes) or **4**\ *xx* or **5**\ *xx* (indicating errors). It indicates the status of a response.                                                                                                                                               |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | responseHeaders       | Map<String, Object>                                       | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | HTTP response header list, composed of tuples. In a tuple, the **String** key indicates the name of the header, and the **Object** value indicates the value of the header. **Default value**:                                                                                                                            |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | location              | String                                                    | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Region where a bucket is located.                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | To learn about valid regions and endpoints, see `Regions and Endpoints <https://docs.otc.t-systems.com/en-us/endpoint/index.html>`__. An endpoint is the request address for calling an API. Endpoints vary depending on services and regions. To obtain the regions and endpoints, contact the enterprise administrator. |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | obsVersion            | String                                                    | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | OBS version of the bucket.                                                                                                                                                                                                                                                                                                |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | -  **3.0** indicates the latest OBS version.                                                                                                                                                                                                                                                                              |
   |                       |                                                           | -  **--** indicates any version earlier than 3.0.                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | storageClass          | :ref:`StorageClassEnum <obs_21_0405__table1840063144212>` | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Bucket storage class that can be specified at bucket creation.                                                                                                                                                                                                                                                            |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | See :ref:`Table 4 <obs_21_0405__table1840063144212>`.                                                                                                                                                                                                                                                                     |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **STANDARD**                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | allowOrigin           | String                                                    | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | If **Origin** in the request meets the CORS rules of the bucket, **AllowedOrigin** specified in the CORS rules is returned.                                                                                                                                                                                               |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Restrictions:**                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | You can configure one or more rules and use at most one wildcard character (``*``) in each rule. If you want to configure multiple rules, separate them using a line breaker.                                                                                                                                             |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | allowHeaders          | List<String>                                              | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | If **RequestHeader** in the request meets the CORS rules of the bucket, **AllowedHeader** specified in the CORS rules is returned.                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Restrictions:**                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | You can enter multiple allowed headers, with one separated from another using a line break. Each header can contain one wildcard character (``*``) at most. Spaces, ampersands (&), colons (:), and less-than signs (<) are not allowed.                                                                                  |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | allowMethods          | List<String>                                              | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | The allowed HTTP methods for a cross-origin request, indicating the operation types of buckets and objects.                                                                                                                                                                                                               |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | The following HTTP methods are supported:                                                                                                                                                                                                                                                                                 |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | -  GET                                                                                                                                                                                                                                                                                                                    |
   |                       |                                                           | -  PUT                                                                                                                                                                                                                                                                                                                    |
   |                       |                                                           | -  HEAD                                                                                                                                                                                                                                                                                                                   |
   |                       |                                                           | -  POST                                                                                                                                                                                                                                                                                                                   |
   |                       |                                                           | -  DELETE                                                                                                                                                                                                                                                                                                                 |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | exposeHeaders         | List<String>                                              | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | The CORS-allowed additional headers in the response. These headers provide additional information to clients. By default, your browser can only access headers **Content-Length** and **Content-Type**. If your browser needs to access other headers, add them to the list of the allowed additional headers.            |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Restrictions:**                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Spaces, wildcard characters (``*``), ampersands (&), colons (:), and less-than signs (<) are not allowed.                                                                                                                                                                                                                 |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | maxAge                | int                                                       | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Time your client can cache the response for a cross-origin request                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Restrictions:**                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Each CORS rule can contain only one **maxAge**.                                                                                                                                                                                                                                                                           |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Value range**:                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | An integer greater than 0, in seconds                                                                                                                                                                                                                                                                                     |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | 100                                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | epid                  | String                                                    | **Explanation:**                                                                                                                                                                                                                                                                                                          |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Enterprise project ID that can be specified at bucket creation. If you have enabled EPS, you can obtain the project ID from the EPS console.                                                                                                                                                                              |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Restrictions:**                                                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | The value of **Epid** is a UUID. If the default enterprise project is used, **0** is passed here or **Epid** is not included. **Epid** is not required for those who have not enabled the EPS.                                                                                                                            |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | Example: **9892d768-2d13-450f-aac7-ed0e44c2585f**                                                                                                                                                                                                                                                                         |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | **Default value**:                                                                                                                                                                                                                                                                                                        |
   |                       |                                                           |                                                                                                                                                                                                                                                                                                                           |
   |                       |                                                           | None                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _obs_21_0405__table1840063144212:

.. table:: **Table 4** StorageClassEnum

   ======== ============= =======================
   Constant Default Value Description
   ======== ============= =======================
   STANDARD STANDARD      Standard storage class.
   WARM     WARM          Warm storage class.
   COLD     COLD          Cold storage class.
   ======== ============= =======================

Code Examples
-------------

This example obtains the metadata of bucket **examplebucket**. The origin of the cross-origin request is **http://www.exampleorigin.com**.

::

   import com.obs.services.ObsClient;
   import com.obs.services.exception.ObsException;
   import com.obs.services.model.BucketMetadataInfoRequest;
   import com.obs.services.model.BucketMetadataInfoResult;
   public class GetBucketMetadata001 {
       public static void main(String[] args) {
           // Obtain an AK/SK pair using environment variables or import the AK/SK pair in other ways. Using hard coding may result in leakage.
           // Obtain an AK/SK pair on the management console.
           String ak = System.getenv("ACCESS_KEY_ID");
           String sk = System.getenv("SECRET_ACCESS_KEY_ID");
           // (Optional) If you are using a temporary AK/SK pair and a security token to access OBS, you are advised not to use hard coding, which may result in information leakage.
           // Obtain an AK/SK pair and a security token using environment variables or import them in other ways.
           // String securityToken = System.getenv("SECURITY_TOKEN");
           // Enter the endpoint corresponding to the region where the bucket is to be created.
           String endPoint = "https://your-endpoint";
           // Obtain an endpoint using environment variables or import it in other ways.
           // String endPoint = System.getenv("ENDPOINT");

           // Create an ObsClient instance.
           // Use the permanent AK/SK pair to initialize the client.
           ObsClient obsClient = new ObsClient(ak, sk,endPoint);
           // Use the temporary AK/SK pair and security token to initialize the client.
           // ObsClient obsClient = new ObsClient(ak, sk, securityToken, endPoint);

           try {
               // Example bucket name
               String exampleBucket = "examplebucket";
               //Example origin
               String exampleOrigin = "http://www.exampleorigin.com";
               BucketMetadataInfoRequest request = new BucketMetadataInfoRequest(exampleBucket);
               // Specify setOrigin only when cross origin resource sharing (CORS) is used.
               request.setOrigin(exampleOrigin);
               // Obtain the bucket metadata.
               BucketMetadataInfoResult result = obsClient.getBucketMetadata(request);
               System.out.println("GetBucketMetadata successfully");
               System.out.println("GetBucketType:" + result.getBucketType());
               System.out.println("GetLocation:" + result.getLocation());
               System.out.println("GetBucketStorageClass:" + result.getBucketStorageClass());
               System.out.println("GetObsVersion:" + result.getObsVersion());
               System.out.println("GetAllowOrigin:" + result.getAllowOrigin());
               System.out.println("GetMaxAge:" + result.getMaxAge());
               System.out.println("GetAllowHeaders:" + result.getAllowHeaders());
               System.out.println("GetAllowMethods:" + result.getAllowMethods());
               System.out.println("GetExposeHeaders:" + result.getExposeHeaders());
           } catch (ObsException e) {
               System.out.println("GetBucketMetadata failed");
               // Request failed. Print the HTTP status code.
               System.out.println("HTTP Code:" + e.getResponseCode());
               // Request failed. Print the server-side error code.
               System.out.println("Error Code:" + e.getErrorCode());
               // Request failed. Print the error details.
               System.out.println("Error Message:" + e.getErrorMessage());
               // Request failed. Print the request ID.
               System.out.println("Request ID:" + e.getErrorRequestId());
               System.out.println("Host ID:" + e.getErrorHostId());
               e.printStackTrace();
           } catch (Exception e) {
               System.out.println("GetBucketMetadata failed");
               // Print other error information.
               e.printStackTrace();
           }
       }
   }
