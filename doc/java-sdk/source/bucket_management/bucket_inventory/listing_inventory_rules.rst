:original_name: obs_21_0419.html

.. _obs_21_0419:

Listing Inventory Rules
=======================

Function
--------

This API returns a list of all inventory rules for the bucket.

Restrictions
------------

-  To list inventory rules for a bucket, you must be the bucket owner or have the required permission (**obs:bucket:GetInventoryConfiguration** in IAM or **GetInventoryConfiguration** in a bucket policy).

Method
------

obsClient.listInventoryConfiguration(:ref:`ListInventoryConfigurationRequest <obs_21_0419__table2282124793220>` :ref:`request <obs_21_0419__table2282124793220>`)

Request Parameters
------------------

.. _obs_21_0419__table2282124793220:

.. table:: **Table 1** ListInventoryConfigurationRequest

   +-----------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Type            | Mandatory (Yes/No) | Description                                                                                                                                                                       |
   +=================+=================+====================+===================================================================================================================================================================================+
   | bucketName      | String          | Yes                | **Explanation:**                                                                                                                                                                  |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | Bucket name.                                                                                                                                                                      |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | **Restrictions:**                                                                                                                                                                 |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | -  A bucket name must be unique across all accounts and regions.                                                                                                                  |
   |                 |                 |                    | -  A bucket name:                                                                                                                                                                 |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    |    -  Must be 3 to 63 characters long and start with a digit or letter. Lowercase letters, digits, hyphens (-), and periods (.) are allowed.                                      |
   |                 |                 |                    |    -  Cannot be formatted as an IP address.                                                                                                                                       |
   |                 |                 |                    |    -  Cannot start or end with a hyphen (-) or period (.).                                                                                                                        |
   |                 |                 |                    |    -  Cannot contain two consecutive periods (..), for example, **my..bucket**.                                                                                                   |
   |                 |                 |                    |    -  Cannot contain periods (.) and hyphens (-) adjacent to each other, for example, **my-.bucket** or **my.-bucket**.                                                           |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | -  If you repeatedly create buckets of the same name in the same region, no error will be reported and the bucket attributes comply with those set in the first creation request. |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | **Default value**:                                                                                                                                                                |
   |                 |                 |                    |                                                                                                                                                                                   |
   |                 |                 |                    | None                                                                                                                                                                              |
   +-----------------+-----------------+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Responses
---------

.. table:: **Table 2** ListInventoryConfigurationResult

   +-------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter               | Type                                                                  | Description                                                                                                                                                                 |
   +=========================+=======================================================================+=============================================================================================================================================================================+
   | statusCode              | int                                                                   | **Explanation:**                                                                                                                                                            |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | HTTP status code.                                                                                                                                                           |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | **Value range**:                                                                                                                                                            |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | A status code is a group of digits that can be **2**\ *xx* (indicating successes) or **4**\ *xx* or **5**\ *xx* (indicating errors). It indicates the status of a response. |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | **Default value**:                                                                                                                                                          |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | None                                                                                                                                                                        |
   +-------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | responseHeaders         | Map<String, Object>                                                   | **Explanation:**                                                                                                                                                            |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | HTTP response header list, composed of tuples. In a tuple, the **String** key indicates the name of the header, and the **Object** value indicates the value of the header. |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | **Default value**:                                                                                                                                                          |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | None                                                                                                                                                                        |
   +-------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | inventoryConfigurations | List<:ref:`InventoryConfiguration <obs_21_0419__table1541573412514>`> | **Explanation:**                                                                                                                                                            |
   |                         |                                                                       |                                                                                                                                                                             |
   |                         |                                                                       | All inventory configurations of the bucket. For details, see :ref:`Table 3 <obs_21_0419__table1541573412514>`.                                                              |
   +-------------------------+-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _obs_21_0419__table1541573412514:

.. table:: **Table 3** InventoryConfiguration

   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Type              | Mandatory (Yes/No) | Description                                                                                                                                                                                                                                |
   +========================+===================+====================+============================================================================================================================================================================================================================================+
   | configurationId        | String            | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | ID of a bucket inventory rule.                                                                                                                                                                                                             |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Restrictions:**                                                                                                                                                                                                                          |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | The rule ID allows letters (a-z, A-Z), digits (0-9), hyphens (-), underscores (_), and periods (.).                                                                                                                                        |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | The value can be up to 64 characters long.                                                                                                                                                                                                 |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | isEnabled              | boolean           | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Whether the bucket inventory rule is enabled.                                                                                                                                                                                              |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **true**: The rule is enabled, and an inventory file is generated.                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **false**: The rule is disabled. No inventory file is generated.                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | true                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | objectPrefix           | String            | No                 | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Used to filter objects. Only objects with the specified name prefix are included in the inventory.                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | The value must contain 1 to 1,024 characters.                                                                                                                                                                                              |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | frequency              | String            | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Intervals when inventories are generated. You can set this parameter to **Daily** or **Weekly**. An inventory is generated within one hour from when it is configured for the first time. Then it is generated at the specified intervals. |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Daily**: Inventories are generated once a day.                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Weekly**: Inventories are generated once a week.                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | inventoryFormat        | String            | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Inventory file format. Only the CSV format is supported.                                                                                                                                                                                   |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | CSV                                                                                                                                                                                                                                        |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | destinationBucket      | String            | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Name of the bucket for storing inventories.                                                                                                                                                                                                |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Restrictions:**                                                                                                                                                                                                                          |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | -  A bucket name must be unique across all accounts and regions.                                                                                                                                                                           |
   |                        |                   |                    | -  A bucket name:                                                                                                                                                                                                                          |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    |    -  Must be 3 to 63 characters long and start with a digit or letter. Lowercase letters, digits, hyphens (-), and periods (.) are allowed.                                                                                               |
   |                        |                   |                    |    -  Cannot be formatted as an IP address.                                                                                                                                                                                                |
   |                        |                   |                    |    -  Cannot start or end with a hyphen (-) or period (.).                                                                                                                                                                                 |
   |                        |                   |                    |    -  Cannot contain two consecutive periods (..), for example, **my..bucket**.                                                                                                                                                            |
   |                        |                   |                    |    -  Cannot contain periods (.) and hyphens (-) adjacent to each other, for example, **my-.bucket** or **my.-bucket**.                                                                                                                    |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | -  If you repeatedly create buckets of the same name in the same region, no error will be reported and the bucket attributes comply with those set in the first creation request.                                                          |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | inventoryPrefix        | String            | No                 | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | The prefix of the inventory file name.                                                                                                                                                                                                     |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | The value must contain 1 to 1,024 characters.                                                                                                                                                                                              |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | If you do not specify this parameter, **BucketInventory** is used as the prefix by default.                                                                                                                                                |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | includedObjectVersions | String            | Yes                | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Whether versions of objects are included in an inventory.                                                                                                                                                                                  |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | -  If this parameter is set to **All**, all the versions of objects are included in the inventory, and version-related fields are added to the inventory, including: **VersionId**, **IsLatest**, and **DeleteMarker**.                    |
   |                        |                   |                    | -  If this parameter is set to **Current**, the inventory only lists information about the current object version and does not include any version-related fields.                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | optionalFields         | ArrayList<String> | No                 | **Explanation:**                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | Additional object metadata fields that are contained in an inventory file.                                                                                                                                                                 |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Value range**:                                                                                                                                                                                                                           |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Size**: Object size.                                                                                                                                                                                                                     |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **LastModifiedDate**: Last time when the object was modified.                                                                                                                                                                              |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **StorageClass**: The storage class of the object.                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **ETag**: The ETag value of the object.                                                                                                                                                                                                    |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **IsMultipartUploaded**: Whether the object was uploaded in a :ref:`multipart upload <obs_21_0607>`.                                                                                                                                       |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **ReplicationStatus**: The cross-region replication status of the object.                                                                                                                                                                  |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **EncryptionStatus**: The encryption status of the object.                                                                                                                                                                                 |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | **Default value**:                                                                                                                                                                                                                         |
   |                        |                   |                    |                                                                                                                                                                                                                                            |
   |                        |                   |                    | None                                                                                                                                                                                                                                       |
   +------------------------+-------------------+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Code Examples
-------------

This example lists all inventory files of bucket **example-bucket**.

::

   import com.obs.services.ObsClient;
   import com.obs.services.exception.ObsException;
   import com.obs.services.model.inventory.InventoryConfiguration;
   import com.obs.services.model.inventory.ListInventoryConfigurationRequest;
   import com.obs.services.model.inventory.ListInventoryConfigurationResult;
   import java.util.List;
   public class ListInventoryConfigurations001 {
       public static void main(String[] args) {
           // Obtain an AK/SK pair using environment variables or import the AK/SK pair in other ways. Using hard coding may result in leakage.
           // Obtain an AK/SK pair on the management console.
           String ak = System.getenv("ACCESS_KEY_ID");
           String sk = System.getenv("SECRET_ACCESS_KEY_ID");
           // (Optional) If you are using a temporary AK/SK pair and a security token to access OBS, you are advised not to use hard coding, which may result in information leakage.
           // Obtain an AK/SK pair and a security token using environment variables or import them in other ways.
           // String securityToken = System.getenv("SECURITY_TOKEN");
           // Enter the endpoint corresponding to the region where the bucket is to be created.
           String endPoint = "https://your-endpoint";
           // Obtain an endpoint using environment variables or import it in other ways.
           // String endPoint = System.getenv("ENDPOINT");

           // Create an ObsClient instance.
           // Use the permanent AK/SK pair to initialize the client.
           ObsClient obsClient = new ObsClient(ak, sk,endPoint);
           // Use the temporary AK/SK pair and security token to initialize the client.
           // ObsClient obsClient = new ObsClient(ak, sk, securityToken, endPoint);

           try {
               // Set the following parameters.
               String exampleBucketName = "example-bucket";
               ListInventoryConfigurationRequest request = new ListInventoryConfigurationRequest(exampleBucketName);
               // List all inventory rules.
               ListInventoryConfigurationResult result = obsClient.listInventoryConfiguration(request);
               List<InventoryConfiguration> inventoryConfigurations = result.getInventoryConfigurations();
               //Print all parameters in all inventory rules.
               for (InventoryConfiguration inventoryConfiguration : inventoryConfigurations) {
                   System.out.println("ConfigurationId:" + inventoryConfiguration.getConfigurationId());
                   System.out.println("DestinationBucket:" + inventoryConfiguration.getDestinationBucket());
                   System.out.println("InventoryFormat:" + inventoryConfiguration.getInventoryFormat());
                   System.out.println("Enabled:" + inventoryConfiguration.getEnabled());
                   System.out.println("Frequency:" + inventoryConfiguration.getFrequency());
                   System.out.println("IncludedObjectVersions:" + inventoryConfiguration.getIncludedObjectVersions());
                   System.out.println("InventoryPrefix:" + inventoryConfiguration.getInventoryPrefix());
                   System.out.println("ObjectPrefix:" + inventoryConfiguration.getObjectPrefix());
                   System.out.println("OptionalFields:" + inventoryConfiguration.getOptionalFields());
                   System.out.println("--------------------------------");
               }
               // Print the HTTP status code.
               System.out.println("HTTP Code: " + result.getStatusCode());
               System.out.println("ListInventoryConfiguration succeeded");
           } catch (ObsException e) {
               System.out.println("ListInventoryConfiguration failed");
               // Request failed. Print the HTTP status code.
               System.out.println("HTTP Code: " + e.getResponseCode());
               // Request failed. Print the server-side error code.
               System.out.println("Error Code:" + e.getErrorCode());
               // Request failed. Print the error details.
               System.out.println("Error Message:" + e.getErrorMessage());
               // Request failed. Print the request ID.
               System.out.println("Request ID:" + e.getErrorRequestId());
               System.out.println("Host ID:" + e.getErrorHostId());
           } catch (Exception e) {
               System.out.println("ListInventoryConfiguration failed");
               // Print other error information.
               e.printStackTrace();
           }
       }
   }
